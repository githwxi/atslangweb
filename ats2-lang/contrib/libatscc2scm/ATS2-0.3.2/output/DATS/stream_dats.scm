;;;;;;
;;
;; The Scheme code is generated by atscc2scm
;; The starting compilation time is: 2017-4-12:  0h:35m
;;
;;;;;;

(define
(_ats2scmpre_stream_patsfun_6__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_6 (ATSCCget_1 _fcenvs_))) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_17__closurerize xenv0 xenv1)
;;%{
  (list (lambda(_fcenvs_ xarg0)(_ats2scmpre_stream_patsfun_17 (ATSCCget_1 _fcenvs_) (ATSCCget_2 _fcenvs_) xarg0)) xenv0 xenv1)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_23__closurerize xenv0 xenv1)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_23 (ATSCCget_1 _fcenvs_) (ATSCCget_2 _fcenvs_))) xenv0 xenv1)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_25__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_25 (ATSCCget_1 _fcenvs_))) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_27__closurerize xenv0 xenv1)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_27 (ATSCCget_1 _fcenvs_) (ATSCCget_2 _fcenvs_))) xenv0 xenv1)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_29__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_ xarg0)(_ats2scmpre_stream_patsfun_29 (ATSCCget_1 _fcenvs_) xarg0)) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_31__closurerize xenv0 xenv1)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_31 (ATSCCget_1 _fcenvs_) (ATSCCget_2 _fcenvs_))) xenv0 xenv1)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_33__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_ xarg0)(_ats2scmpre_stream_patsfun_33 (ATSCCget_1 _fcenvs_) xarg0)) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_36__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_ xarg0)(_ats2scmpre_stream_patsfun_36 (ATSCCget_1 _fcenvs_) xarg0)) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_39__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_ xarg0)(_ats2scmpre_stream_patsfun_39 (ATSCCget_1 _fcenvs_) xarg0)) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_42__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_ xarg0)(_ats2scmpre_stream_patsfun_42 (ATSCCget_1 _fcenvs_) xarg0)) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_46__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_ xarg0)(_ats2scmpre_stream_patsfun_46 (ATSCCget_1 _fcenvs_) xarg0)) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_49__closurerize xenv0 xenv1)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_49 (ATSCCget_1 _fcenvs_) (ATSCCget_2 _fcenvs_))) xenv0 xenv1)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_52__closurerize xenv0 xenv1 xenv2 xenv3)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_52 (ATSCCget_1 _fcenvs_) (ATSCCget_2 _fcenvs_) (ATSCCget_3 _fcenvs_) (ATSCCget_at _fcenvs_ 4))) xenv0 xenv1 xenv2 xenv3)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_53__closurerize xenv0 xenv1)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_53 (ATSCCget_1 _fcenvs_) (ATSCCget_2 _fcenvs_))) xenv0 xenv1)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_56__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_56 (ATSCCget_1 _fcenvs_))) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_58__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_58 (ATSCCget_1 _fcenvs_))) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_60__closurerize xenv0 xenv1)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_60 (ATSCCget_1 _fcenvs_) (ATSCCget_2 _fcenvs_))) xenv0 xenv1)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_65__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_ xarg0 xarg1)(_ats2scmpre_stream_patsfun_65 (ATSCCget_1 _fcenvs_) xarg0 xarg1)) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_67__closurerize xenv0)
;;%{
  (list (lambda(_fcenvs_ xarg0 xarg1)(_ats2scmpre_stream_patsfun_67 (ATSCCget_1 _fcenvs_) xarg0 xarg1)) xenv0)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_70__closurerize xenv0 xenv1)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_70 (ATSCCget_1 _fcenvs_) (ATSCCget_2 _fcenvs_))) xenv0 xenv1)
;;%}
) ;; define


(define
(_ats2scmpre_stream_patsfun_72__closurerize xenv0 xenv1)
;;%{
  (list (lambda(_fcenvs_)(_ats2scmpre_stream_patsfun_72 (ATSCCget_1 _fcenvs_) (ATSCCget_2 _fcenvs_))) xenv0 xenv1)
;;%}
) ;; define


;;fun
(define
(ats2scmpre_stream_make_list arg0)
(let(
;;knd = 0
  (tmpret7 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_make_list
  (ATSPMVlazyval (_ats2scmpre_stream_patsfun_6__closurerize arg0))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_6 env0)
(let(
;;knd = 0
  (tmpret8 #f)
  (tmp9 #f)
  (tmp10 #f)
  (tmp11 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_6
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons env0)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       atscc2scm_null
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (casefnx 4)
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp9 (ATSSELcon env0 0))
       (ATSINStmpset tmp10 (ATSSELcon env0 1))
       (ATSINStmpset tmp11 (ats2scmpre_stream_make_list tmp10))
       (ATSPMVtysum tmp9 tmp11)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_make_list0 arg0)
(let(
;;knd = 0
  (tmpret12 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_make_list0
  (ats2scmpre_stream_make_list arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_nth_opt arg0 arg1)
(let(
;;knd = 0
  (tmpret13 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_nth_opt
  (_ats2scmpre_stream_loop_9 arg0 arg1)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_loop_9 arg0 arg1)
(let(
;;knd = 1
;;(apy0 #f)
;;(apy1 #f)
  (tmpret14 #f)
  (tmp15 #f)
  (tmp16 #f)
  (tmp17 #f)
  (tmp18 #f)
  (tmp19 #f)
;;var funlab_scm
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;while(true) {
    ;; funlab_scm = 0;
    ;; __patsflab__ats2scmpre_stream_loop_9
    (ATSINStmpset tmp15 (ATSPMVlazyval_eval arg0))
    (letrec(
      (casefnx
       (lambda(tmplab)(case tmplab
        ;; ATSbranchseq_beg
        ((1)
         (if (ATSCKptriscons tmp15)
           (casefnx 4)
           (begin
            (casefnx 2)
           )
         )
        ) ;; end-of-branch
        ((2)
         atscc2scm_null
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; ATSbranchseq_beg
        ((3)
         (casefnx 4)
        ) ;; end-of-branch
        ((4)
         (ATSINStmpset tmp16 (ATSSELcon tmp15 0))
         (ATSINStmpset tmp17 (ATSSELcon tmp15 1))
         (ATSINStmpset tmp18 (ats2scmpre_gt_int1_int1 arg1 0))
         (if tmp18
           (begin
            (ATSINStmpset tmp19 (ats2scmpre_pred_int1 arg1))
            ;; apy0 = tmp17
            ;; apy1 = tmp19
            ;; arg0 = apy0
            ;; arg1 = apy1
            ;; funlab_scm = 1; // __patsflab__ats2scmpre_stream_loop_9
            (_ats2scmpre_stream_loop_9 tmp17 tmp19)
           ) ;; if-then
           (begin
            (ATSPMVtysum tmp16)
           ) ;; if-else
         )
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
        ) ;; end-of-case
       ) ;; end-of-lambda
      ) ;; end-of-casefnx
     ) (casefnx 1)
    ) ;; end-of-letrec
    ;; if (funlab_scm > 0) continue; else ;; return tmpret14;
  ;} // endwhile-fun
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_length arg0)
(let(
;;knd = 0
  (tmpret20 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_length
  (_ats2scmpre_stream_loop_11 arg0 0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_loop_11 arg0 arg1)
(let(
;;knd = 1
;;(apy0 #f)
;;(apy1 #f)
  (tmpret21 #f)
  (tmp22 #f)
  (tmp24 #f)
  (tmp25 #f)
;;var funlab_scm
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;while(true) {
    ;; funlab_scm = 0;
    ;; __patsflab__ats2scmpre_stream_loop_11
    (ATSINStmpset tmp22 (ATSPMVlazyval_eval arg0))
    (letrec(
      (casefnx
       (lambda(tmplab)(case tmplab
        ;; ATSbranchseq_beg
        ((1)
         (if (ATSCKptriscons tmp22)
           (casefnx 4)
           (begin
            (casefnx 2)
           )
         )
        ) ;; end-of-branch
        ((2)
         arg1
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; ATSbranchseq_beg
        ((3)
         (casefnx 4)
        ) ;; end-of-branch
        ((4)
         (ATSINStmpset tmp24 (ATSSELcon tmp22 1))
         (ATSINStmpset tmp25 (ats2scmpre_add_int1_int1 arg1 1))
         ;; apy0 = tmp24
         ;; apy1 = tmp25
         ;; arg0 = apy0
         ;; arg1 = apy1
         ;; funlab_scm = 1; // __patsflab__ats2scmpre_stream_loop_11
         (_ats2scmpre_stream_loop_11 tmp24 tmp25)
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
        ) ;; end-of-case
       ) ;; end-of-lambda
      ) ;; end-of-casefnx
     ) (casefnx 1)
    ) ;; end-of-letrec
    ;; if (funlab_scm > 0) continue; else ;; return tmpret21;
  ;} // endwhile-fun
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream2list arg0)
(let(
;;knd = 0
  (tmpret26 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream2list
  (_ats2scmpre_stream_aux_13 arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_aux_13 arg0)
(let(
;;knd = 0
  (tmpret27 #f)
  (tmp28 #f)
  (tmp29 #f)
  (tmp30 #f)
  (tmp31 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_aux_13
  (ATSINStmpset tmp28 (ATSPMVlazyval_eval arg0))
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons tmp28)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       atscc2scm_null
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (casefnx 4)
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp29 (ATSSELcon tmp28 0))
       (ATSINStmpset tmp30 (ATSSELcon tmp28 1))
       (ATSINStmpset tmp31 (_ats2scmpre_stream_aux_13 tmp30))
       (ATSPMVtysum tmp29 tmp31)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream2list_rev arg0)
(let(
;;knd = 0
  (tmpret32 #f)
  (tmp38 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream2list_rev
  (ATSINStmpset tmp38 atscc2scm_null)
  (_ats2scmpre_stream_loop_15 arg0 tmp38)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_loop_15 arg0 arg1)
(let(
;;knd = 1
;;(apy0 #f)
;;(apy1 #f)
  (tmpret33 #f)
  (tmp34 #f)
  (tmp35 #f)
  (tmp36 #f)
  (tmp37 #f)
;;var funlab_scm
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;while(true) {
    ;; funlab_scm = 0;
    ;; __patsflab__ats2scmpre_stream_loop_15
    (ATSINStmpset tmp34 (ATSPMVlazyval_eval arg0))
    (letrec(
      (casefnx
       (lambda(tmplab)(case tmplab
        ;; ATSbranchseq_beg
        ((1)
         (if (ATSCKptriscons tmp34)
           (casefnx 4)
           (begin
            (casefnx 2)
           )
         )
        ) ;; end-of-branch
        ((2)
         arg1
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; ATSbranchseq_beg
        ((3)
         (casefnx 4)
        ) ;; end-of-branch
        ((4)
         (ATSINStmpset tmp35 (ATSSELcon tmp34 0))
         (ATSINStmpset tmp36 (ATSSELcon tmp34 1))
         (ATSINStmpset tmp37 (ATSPMVtysum tmp35 arg1))
         ;; apy0 = tmp36
         ;; apy1 = tmp37
         ;; arg0 = apy0
         ;; arg1 = apy1
         ;; funlab_scm = 1; // __patsflab__ats2scmpre_stream_loop_15
         (_ats2scmpre_stream_loop_15 tmp36 tmp37)
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
        ) ;; end-of-case
       ) ;; end-of-lambda
      ) ;; end-of-casefnx
     ) (casefnx 1)
    ) ;; end-of-letrec
    ;; if (funlab_scm > 0) continue; else ;; return tmpret33;
  ;} // endwhile-fun
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_takeLte arg0 arg1)
(let(
;;knd = 0
  (tmpret39 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_takeLte
  (ATSPMVllazyval (_ats2scmpre_stream_patsfun_17__closurerize arg0 arg1))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_17 env0 env1 arg0)
(let(
;;knd = 0
  (tmpret40 #f)
  (tmp41 #f)
  (tmp42 #f)
  (tmp43 #f)
  (tmp44 #f)
  (tmp45 #f)
  (tmp46 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_17
  (if arg0
    (begin
     (ATSINStmpset tmp41 (ats2scmpre_gt_int1_int1 env1 0))
     (if tmp41
       (begin
        (ATSINStmpset tmp42 (ATSPMVlazyval_eval env0))
        (letrec(
          (casefnx
           (lambda(tmplab)(case tmplab
            ;; ATSbranchseq_beg
            ((1)
             (if (ATSCKptriscons tmp42)
               (casefnx 4)
               (begin
                (casefnx 2)
               )
             )
            ) ;; end-of-branch
            ((2)
             atscc2scm_null
            ) ;; end-of-branch
            ;; ATSbranchseq_end
            ;; ATSbranchseq_beg
            ((3)
             (casefnx 4)
            ) ;; end-of-branch
            ((4)
             (ATSINStmpset tmp43 (ATSSELcon tmp42 0))
             (ATSINStmpset tmp44 (ATSSELcon tmp42 1))
             (ATSINStmpset tmp46 (ats2scmpre_sub_int1_int1 env1 1))
             (ATSINStmpset tmp45 (ats2scmpre_stream_takeLte tmp44 tmp46))
             (ATSPMVtysum tmp43 tmp45)
            ) ;; end-of-branch
            ;; ATSbranchseq_end
            ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
            ) ;; end-of-case
           ) ;; end-of-lambda
          ) ;; end-of-casefnx
         ) (casefnx 1)
        ) ;; end-of-letrec
       ) ;; if-then
       (begin
        atscc2scm_null
       ) ;; if-else
     )
    ) ;; if-then
    (begin
    ) ;; if-else
  )
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_take_opt arg0 arg1)
(let(
;;knd = 0
  (tmpret47 #f)
  (tmp56 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_take_opt
  (ATSINStmpset tmp56 atscc2scm_null)
  (_ats2scmpre_stream_auxmain_19 arg1 arg0 0 tmp56)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_auxmain_19 env0 arg0 arg1 arg2)
(let(
;;knd = 1
;;(apy0 #f)
;;(apy1 #f)
;;(apy2 #f)
  (tmpret48 #f)
  (tmp49 #f)
  (tmp50 #f)
  (tmp51 #f)
  (tmp52 #f)
  (tmp53 #f)
  (tmp54 #f)
  (tmp55 #f)
;;var funlab_scm
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;while(true) {
    ;; funlab_scm = 0;
    ;; __patsflab__ats2scmpre_stream_auxmain_19
    (ATSINStmpset tmp49 (ats2scmpre_lt_int1_int1 arg1 env0))
    (if tmp49
      (begin
       (ATSINStmpset tmp50 (ATSPMVlazyval_eval arg0))
       (letrec(
         (casefnx
          (lambda(tmplab)(case tmplab
           ;; ATSbranchseq_beg
           ((1)
            (if (ATSCKptriscons tmp50)
              (casefnx 4)
              (begin
               (casefnx 2)
              )
            )
           ) ;; end-of-branch
           ((2)
            atscc2scm_null
           ) ;; end-of-branch
           ;; ATSbranchseq_end
           ;; ATSbranchseq_beg
           ((3)
            (casefnx 4)
           ) ;; end-of-branch
           ((4)
            (ATSINStmpset tmp51 (ATSSELcon tmp50 0))
            (ATSINStmpset tmp52 (ATSSELcon tmp50 1))
            (ATSINStmpset tmp53 (ats2scmpre_add_int1_int1 arg1 1))
            (ATSINStmpset tmp54 (ATSPMVtysum tmp51 arg2))
            ;; apy0 = tmp52
            ;; apy1 = tmp53
            ;; apy2 = tmp54
            ;; arg0 = apy0
            ;; arg1 = apy1
            ;; arg2 = apy2
            ;; funlab_scm = 1; // __patsflab__ats2scmpre_stream_auxmain_19
            (_ats2scmpre_stream_auxmain_19 env0 tmp52 tmp53 tmp54)
           ) ;; end-of-branch
           ;; ATSbranchseq_end
           ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
           ) ;; end-of-case
          ) ;; end-of-lambda
         ) ;; end-of-casefnx
        ) (casefnx 1)
       ) ;; end-of-letrec
      ) ;; if-then
      (begin
       (ATSINStmpset tmp55 (ats2scmpre_list_reverse arg2))
       (ATSPMVtysum tmp55)
      ) ;; if-else
    )
    ;; if (funlab_scm > 0) continue; else ;; return tmpret48;
  ;} // endwhile-fun
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_drop_opt arg0 arg1)
(let(
;;knd = 0
  (tmpret57 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_drop_opt
  (_ats2scmpre_stream_auxmain_21 arg1 arg0 0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_auxmain_21 env0 arg0 arg1)
(let(
;;knd = 1
;;(apy0 #f)
;;(apy1 #f)
  (tmpret58 #f)
  (tmp59 #f)
  (tmp60 #f)
  (tmp62 #f)
  (tmp63 #f)
;;var funlab_scm
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;while(true) {
    ;; funlab_scm = 0;
    ;; __patsflab__ats2scmpre_stream_auxmain_21
    (ATSINStmpset tmp59 (ats2scmpre_lt_int1_int1 arg1 env0))
    (if tmp59
      (begin
       (ATSINStmpset tmp60 (ATSPMVlazyval_eval arg0))
       (letrec(
         (casefnx
          (lambda(tmplab)(case tmplab
           ;; ATSbranchseq_beg
           ((1)
            (if (ATSCKptriscons tmp60)
              (casefnx 4)
              (begin
               (casefnx 2)
              )
            )
           ) ;; end-of-branch
           ((2)
            atscc2scm_null
           ) ;; end-of-branch
           ;; ATSbranchseq_end
           ;; ATSbranchseq_beg
           ((3)
            (casefnx 4)
           ) ;; end-of-branch
           ((4)
            (ATSINStmpset tmp62 (ATSSELcon tmp60 1))
            (ATSINStmpset tmp63 (ats2scmpre_add_int1_int1 arg1 1))
            ;; apy0 = tmp62
            ;; apy1 = tmp63
            ;; arg0 = apy0
            ;; arg1 = apy1
            ;; funlab_scm = 1; // __patsflab__ats2scmpre_stream_auxmain_21
            (_ats2scmpre_stream_auxmain_21 env0 tmp62 tmp63)
           ) ;; end-of-branch
           ;; ATSbranchseq_end
           ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
           ) ;; end-of-case
          ) ;; end-of-lambda
         ) ;; end-of-casefnx
        ) (casefnx 1)
       ) ;; end-of-letrec
      ) ;; if-then
      (begin
       (ATSPMVtysum arg0)
      ) ;; if-else
    )
    ;; if (funlab_scm > 0) continue; else ;; return tmpret58;
  ;} // endwhile-fun
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_append arg0 arg1)
(let(
;;knd = 0
  (tmpret64 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_append
  (ATSPMVlazyval (_ats2scmpre_stream_patsfun_23__closurerize arg0 arg1))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_23 env0 env1)
(let(
;;knd = 0
  (tmpret65 #f)
  (tmp66 #f)
  (tmp67 #f)
  (tmp68 #f)
  (tmp69 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_23
  (ATSINStmpset tmp66 (ATSPMVlazyval_eval env0))
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons tmp66)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       (ATSPMVlazyval_eval env1)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (casefnx 4)
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp67 (ATSSELcon tmp66 0))
       (ATSINStmpset tmp68 (ATSSELcon tmp66 1))
       (ATSINStmpset tmp69 (ats2scmpre_stream_append tmp68 env1))
       (ATSPMVtysum tmp67 tmp69)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_concat arg0)
(let(
;;knd = 0
  (tmpret70 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_concat
  (ATSPMVlazyval (_ats2scmpre_stream_patsfun_25__closurerize arg0))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_25 env0)
(let(
;;knd = 0
  (tmpret71 #f)
  (tmp72 #f)
  (tmp73 #f)
  (tmp74 #f)
  (tmp75 #f)
  (tmp76 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_25
  (ATSINStmpset tmp72 (ATSPMVlazyval_eval env0))
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons tmp72)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       atscc2scm_null
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (casefnx 4)
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp73 (ATSSELcon tmp72 0))
       (ATSINStmpset tmp74 (ATSSELcon tmp72 1))
       (ATSINStmpset tmp76 (ats2scmpre_stream_concat tmp74))
       (ATSINStmpset tmp75 (ats2scmpre_stream_append tmp73 tmp76))
       (ATSPMVlazyval_eval tmp75)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_map_cloref arg0 arg1)
(let(
;;knd = 0
  (tmpret77 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_map_cloref
  (ATSPMVlazyval (_ats2scmpre_stream_patsfun_27__closurerize arg0 arg1))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_27 env0 env1)
(let(
;;knd = 0
  (tmpret78 #f)
  (tmp79 #f)
  (tmp80 #f)
  (tmp81 #f)
  (tmp82 #f)
  (tmp83 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_27
  (ATSINStmpset tmp79 (ATSPMVlazyval_eval env0))
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons tmp79)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       atscc2scm_null
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (casefnx 4)
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp80 (ATSSELcon tmp79 0))
       (ATSINStmpset tmp81 (ATSSELcon tmp79 1))
       (ATSINStmpset tmp82 ((ATSfunclo_fclo env1) env1 tmp80))
       (ATSINStmpset tmp83 (ats2scmpre_stream_map_cloref tmp81 env1))
       (ATSPMVtysum tmp82 tmp83)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_map_method arg0 arg1)
(let(
;;knd = 0
  (tmpret84 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_map_method
  (_ats2scmpre_stream_patsfun_29__closurerize arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_29 env0 arg0)
(let(
;;knd = 0
  (tmpret85 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_29
  (ats2scmpre_stream_map_cloref env0 arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_filter_cloref arg0 arg1)
(let(
;;knd = 0
  (tmpret86 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_filter_cloref
  (ATSPMVlazyval (_ats2scmpre_stream_patsfun_31__closurerize arg0 arg1))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_31 env0 env1)
(let(
;;knd = 0
  (tmpret87 #f)
  (tmp88 #f)
  (tmp89 #f)
  (tmp90 #f)
  (tmp91 #f)
  (tmp92 #f)
  (tmp93 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_31
  (ATSINStmpset tmp88 (ATSPMVlazyval_eval env0))
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons tmp88)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       atscc2scm_null
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (casefnx 4)
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp89 (ATSSELcon tmp88 0))
       (ATSINStmpset tmp90 (ATSSELcon tmp88 1))
       (ATSINStmpset tmp91 ((ATSfunclo_fclo env1) env1 tmp89))
       (if tmp91
         (begin
          (ATSINStmpset tmp92 (ats2scmpre_stream_filter_cloref tmp90 env1))
          (ATSPMVtysum tmp89 tmp92)
         ) ;; if-then
         (begin
          (ATSINStmpset tmp93 (ats2scmpre_stream_filter_cloref tmp90 env1))
          (ATSPMVlazyval_eval tmp93)
         ) ;; if-else
       )
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_filter_method arg0)
(let(
;;knd = 0
  (tmpret94 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_filter_method
  (_ats2scmpre_stream_patsfun_33__closurerize arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_33 env0 arg0)
(let(
;;knd = 0
  (tmpret95 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_33
  (ats2scmpre_stream_filter_cloref env0 arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_forall_cloref arg0 arg1)
(let(
;;knd = 1
;;(apy0 #f)
;;(apy1 #f)
  (tmpret96 #f)
  (tmp97 #f)
  (tmp98 #f)
  (tmp99 #f)
  (tmp100 #f)
;;var funlab_scm
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;while(true) {
    ;; funlab_scm = 0;
    ;; __patsflab_stream_forall_cloref
    (ATSINStmpset tmp97 (ATSPMVlazyval_eval arg0))
    (letrec(
      (casefnx
       (lambda(tmplab)(case tmplab
        ;; ATSbranchseq_beg
        ((1)
         (if (ATSCKptriscons tmp97)
           (casefnx 4)
           (begin
            (casefnx 2)
           )
         )
        ) ;; end-of-branch
        ((2)
         atscc2scm_true
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; ATSbranchseq_beg
        ((3)
         (casefnx 4)
        ) ;; end-of-branch
        ((4)
         (ATSINStmpset tmp98 (ATSSELcon tmp97 0))
         (ATSINStmpset tmp99 (ATSSELcon tmp97 1))
         (ATSINStmpset tmp100 ((ATSfunclo_fclo arg1) arg1 tmp98))
         (if tmp100
           (begin
            ;; apy0 = tmp99
            ;; apy1 = arg1
            ;; arg0 = apy0
            ;; arg1 = apy1
            ;; funlab_scm = 1; // __patsflab_stream_forall_cloref
            (ats2scmpre_stream_forall_cloref tmp99 arg1)
           ) ;; if-then
           (begin
            atscc2scm_false
           ) ;; if-else
         )
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
        ) ;; end-of-case
       ) ;; end-of-lambda
      ) ;; end-of-casefnx
     ) (casefnx 1)
    ) ;; end-of-letrec
    ;; if (funlab_scm > 0) continue; else ;; return tmpret96;
  ;} // endwhile-fun
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_forall_method arg0)
(let(
;;knd = 0
  (tmpret101 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_forall_method
  (_ats2scmpre_stream_patsfun_36__closurerize arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_36 env0 arg0)
(let(
;;knd = 0
  (tmpret102 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_36
  (ats2scmpre_stream_forall_cloref env0 arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_exists_cloref arg0 arg1)
(let(
;;knd = 1
;;(apy0 #f)
;;(apy1 #f)
  (tmpret103 #f)
  (tmp104 #f)
  (tmp105 #f)
  (tmp106 #f)
  (tmp107 #f)
;;var funlab_scm
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;while(true) {
    ;; funlab_scm = 0;
    ;; __patsflab_stream_exists_cloref
    (ATSINStmpset tmp104 (ATSPMVlazyval_eval arg0))
    (letrec(
      (casefnx
       (lambda(tmplab)(case tmplab
        ;; ATSbranchseq_beg
        ((1)
         (if (ATSCKptriscons tmp104)
           (casefnx 4)
           (begin
            (casefnx 2)
           )
         )
        ) ;; end-of-branch
        ((2)
         atscc2scm_false
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; ATSbranchseq_beg
        ((3)
         (casefnx 4)
        ) ;; end-of-branch
        ((4)
         (ATSINStmpset tmp105 (ATSSELcon tmp104 0))
         (ATSINStmpset tmp106 (ATSSELcon tmp104 1))
         (ATSINStmpset tmp107 ((ATSfunclo_fclo arg1) arg1 tmp105))
         (if tmp107
           (begin
            atscc2scm_true
           ) ;; if-then
           (begin
            ;; apy0 = tmp106
            ;; apy1 = arg1
            ;; arg0 = apy0
            ;; arg1 = apy1
            ;; funlab_scm = 1; // __patsflab_stream_exists_cloref
            (ats2scmpre_stream_exists_cloref tmp106 arg1)
           ) ;; if-else
         )
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
        ) ;; end-of-case
       ) ;; end-of-lambda
      ) ;; end-of-casefnx
     ) (casefnx 1)
    ) ;; end-of-letrec
    ;; if (funlab_scm > 0) continue; else ;; return tmpret103;
  ;} // endwhile-fun
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_exists_method arg0)
(let(
;;knd = 0
  (tmpret108 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_exists_method
  (_ats2scmpre_stream_patsfun_39__closurerize arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_39 env0 arg0)
(let(
;;knd = 0
  (tmpret109 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_39
  (ats2scmpre_stream_exists_cloref env0 arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_foreach_cloref arg0 arg1)
(let(
;;knd = 1
;;(apy0 #f)
;;(apy1 #f)
  (tmp111 #f)
  (tmp112 #f)
  (tmp113 #f)
;;var funlab_scm
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;while(true) {
    ;; funlab_scm = 0;
    ;; __patsflab_stream_foreach_cloref
    (ATSINStmpset tmp111 (ATSPMVlazyval_eval arg0))
    (letrec(
      (casefnx
       (lambda(tmplab)(case tmplab
        ;; ATSbranchseq_beg
        ((1)
         (if (ATSCKptriscons tmp111)
           (casefnx 4)
           (begin
            (casefnx 2)
           )
         )
        ) ;; end-of-branch
        ((2)
         ATSINSmove0_void
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; ATSbranchseq_beg
        ((3)
         (casefnx 4)
        ) ;; end-of-branch
        ((4)
         (ATSINStmpset tmp112 (ATSSELcon tmp111 0))
         (ATSINStmpset tmp113 (ATSSELcon tmp111 1))
         (ATSINSmove1_void ((ATSfunclo_fclo arg1) arg1 tmp112))
         ;; apy0 = tmp113
         ;; apy1 = arg1
         ;; arg0 = apy0
         ;; arg1 = apy1
         ;; funlab_scm = 1; // __patsflab_stream_foreach_cloref
         (ats2scmpre_stream_foreach_cloref tmp113 arg1)
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
        ) ;; end-of-case
       ) ;; end-of-lambda
      ) ;; end-of-casefnx
     ) (casefnx 1)
    ) ;; end-of-letrec
    ;; if (funlab_scm > 0) continue; else ;; return/*_void*/;
  ;} // endwhile-fun
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_foreach_method arg0)
(let(
;;knd = 0
  (tmpret115 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_foreach_method
  (_ats2scmpre_stream_patsfun_42__closurerize arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_42 env0 arg0)
(let(
;;knd = 0
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_42
  (ATSINSmove1_void (ats2scmpre_stream_foreach_cloref env0 arg0))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_iforeach_cloref arg0 arg1)
(let(
;;knd = 0
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_iforeach_cloref
  (ATSINSmove1_void (_ats2scmpre_stream_loop_44 arg1 0 arg0))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_loop_44 env0 arg0 arg1)
(let(
;;knd = 1
;;(apy0 #f)
;;(apy1 #f)
  (tmp119 #f)
  (tmp120 #f)
  (tmp121 #f)
  (tmp123 #f)
;;var funlab_scm
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;while(true) {
    ;; funlab_scm = 0;
    ;; __patsflab__ats2scmpre_stream_loop_44
    (ATSINStmpset tmp119 (ATSPMVlazyval_eval arg1))
    (letrec(
      (casefnx
       (lambda(tmplab)(case tmplab
        ;; ATSbranchseq_beg
        ((1)
         (if (ATSCKptriscons tmp119)
           (casefnx 4)
           (begin
            (casefnx 2)
           )
         )
        ) ;; end-of-branch
        ((2)
         ATSINSmove0_void
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; ATSbranchseq_beg
        ((3)
         (casefnx 4)
        ) ;; end-of-branch
        ((4)
         (ATSINStmpset tmp120 (ATSSELcon tmp119 0))
         (ATSINStmpset tmp121 (ATSSELcon tmp119 1))
         (ATSINSmove1_void ((ATSfunclo_fclo env0) env0 arg0 tmp120))
         (ATSINStmpset tmp123 (ats2scmpre_add_int1_int1 arg0 1))
         ;; apy0 = tmp123
         ;; apy1 = tmp121
         ;; arg0 = apy0
         ;; arg1 = apy1
         ;; funlab_scm = 1; // __patsflab__ats2scmpre_stream_loop_44
         (_ats2scmpre_stream_loop_44 env0 tmp123 tmp121)
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
        ) ;; end-of-case
       ) ;; end-of-lambda
      ) ;; end-of-casefnx
     ) (casefnx 1)
    ) ;; end-of-letrec
    ;; if (funlab_scm > 0) continue; else ;; return/*_void*/;
  ;} // endwhile-fun
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_iforeach_method arg0)
(let(
;;knd = 0
  (tmpret124 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_iforeach_method
  (_ats2scmpre_stream_patsfun_46__closurerize arg0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_46 env0 arg0)
(let(
;;knd = 0
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_46
  (ATSINSmove1_void (ats2scmpre_stream_iforeach_cloref env0 arg0))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_tabulate_cloref arg0)
(let(
;;knd = 0
  (tmpret126 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_tabulate_cloref
  (_ats2scmpre_stream_auxmain_48 arg0 0)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_auxmain_48 env0 arg0)
(let(
;;knd = 0
  (tmpret127 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_auxmain_48
  (ATSPMVlazyval (_ats2scmpre_stream_patsfun_49__closurerize env0 arg0))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_49 env0 env1)
(let(
;;knd = 0
  (tmpret128 #f)
  (tmp129 #f)
  (tmp130 #f)
  (tmp131 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_49
  (ATSINStmpset tmp129 ((ATSfunclo_fclo env0) env0 env1))
  (ATSINStmpset tmp131 (ats2scmpre_add_int1_int1 env1 1))
  (ATSINStmpset tmp130 (_ats2scmpre_stream_auxmain_48 env0 tmp131))
  (ATSPMVtysum tmp129 tmp130)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_cross_stream_list arg0 arg1)
(let(
;;knd = 0
  (tmpret132 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_cross_stream_list
  (ATSPMVlazyval (_ats2scmpre_stream_patsfun_53__closurerize arg0 arg1))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_auxmain_51 arg0 arg1 arg2 arg3)
(let(
;;knd = 0
  (tmpret133 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_auxmain_51
  (ATSPMVlazyval (_ats2scmpre_stream_patsfun_52__closurerize arg0 arg1 arg2 arg3))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_52 env0 env1 env2 env3)
(let(
;;knd = 0
  (tmpret134 #f)
  (tmp135 #f)
  (tmp136 #f)
  (tmp137 #f)
  (tmp138 #f)
  (tmp139 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_52
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons env3)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       (ATSINStmpset tmp137 (ats2scmpre_cross_stream_list env1 env2))
       (ATSPMVlazyval_eval tmp137)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (casefnx 4)
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp135 (ATSSELcon env3 0))
       (ATSINStmpset tmp136 (ATSSELcon env3 1))
       (ATSINStmpset tmp138 (ATSPMVtyrec env0 tmp135))
       (ATSINStmpset tmp139 (_ats2scmpre_stream_auxmain_51 env0 env1 env2 tmp136))
       (ATSPMVtysum tmp138 tmp139)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_53 env0 env1)
(let(
;;knd = 0
  (tmpret140 #f)
  (tmp141 #f)
  (tmp142 #f)
  (tmp143 #f)
  (tmp144 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_53
  (ATSINStmpset tmp141 (ATSPMVlazyval_eval env0))
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons tmp141)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       atscc2scm_null
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (if (ATSCKptrisnull tmp141)
         (ATSINScaseof_fail "/home/hwxi/Research/ATS-Postiats/contrib/libatscc/ATS2-0.3.2/DATS/stream.dats: 6907(line=451, offs=1) -- 6999(line=453, offs=50)")
         (begin
          (casefnx 4)
         )
       )
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp142 (ATSSELcon tmp141 0))
       (ATSINStmpset tmp143 (ATSSELcon tmp141 1))
       (ATSINStmpset tmp144 (_ats2scmpre_stream_auxmain_51 tmp142 tmp143 env1 env1))
       (ATSPMVlazyval_eval tmp144)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_cross_stream_list0 arg0 arg1)
(let(
;;knd = 0
  (tmpret145 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_cross_stream_list0
  (ats2scmpre_cross_stream_list arg0 arg1)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream2cloref_exn arg0)
(let(
;;knd = 0
  (tmpret146 #f)
  (tmp147 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream2cloref_exn
  (ATSINStmpset tmp147 (ats2scmpre_ref arg0))
  (_ats2scmpre_stream_patsfun_56__closurerize tmp147)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_56 env0)
(let(
;;knd = 0
  (tmpret148 #f)
  (tmp149 #f)
  (tmp150 #f)
  (tmp151 #f)
  (tmp152 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_56
  (ATSINStmpset tmp149 (ats2scmpre_ref_get_elt env0))
  (ATSINStmpset tmp150 (ATSPMVlazyval_eval tmp149))
  (if (ATSCKptrisnull tmp150) (ATSINScaseof_fail "/home/hwxi/Research/ATS-Postiats/contrib/libatscc/ATS2-0.3.2/DATS/stream.dats: 7300(line=479, offs=5) -- 7324(line=479, offs=29)"))
  (ATSINStmpset tmp151 (ATSSELcon tmp150 0))
  (ATSINStmpset tmp152 (ATSSELcon tmp150 1))
  (ATSINSmove1_void (ats2scmpre_ref_set_elt env0 tmp152))
  tmp151
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream2cloref_opt arg0)
(let(
;;knd = 0
  (tmpret154 #f)
  (tmp155 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream2cloref_opt
  (ATSINStmpset tmp155 (ats2scmpre_ref arg0))
  (_ats2scmpre_stream_patsfun_58__closurerize tmp155)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_58 env0)
(let(
;;knd = 0
  (tmpret156 #f)
  (tmp157 #f)
  (tmp158 #f)
  (tmp159 #f)
  (tmp160 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_58
  (ATSINStmpset tmp157 (ats2scmpre_ref_get_elt env0))
  (ATSINStmpset tmp158 (ATSPMVlazyval_eval tmp157))
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons tmp158)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       atscc2scm_null
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (casefnx 4)
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp159 (ATSSELcon tmp158 0))
       (ATSINStmpset tmp160 (ATSSELcon tmp158 1))
       (ATSINSmove1_void (ats2scmpre_ref_set_elt env0 tmp160))
       (ATSPMVtysum tmp159)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream2cloref_last arg0 arg1)
(let(
;;knd = 0
  (tmpret162 #f)
  (tmp163 #f)
  (tmp164 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream2cloref_last
  (ATSINStmpset tmp163 (ats2scmpre_ref arg0))
  (ATSINStmpset tmp164 (ats2scmpre_ref arg1))
  (_ats2scmpre_stream_patsfun_60__closurerize tmp163 tmp164)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_60 env0 env1)
(let(
;;knd = 0
  (tmpret165 #f)
  (tmp166 #f)
  (tmp167 #f)
  (tmp168 #f)
  (tmp169 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_60
  (ATSINStmpset tmp166 (ats2scmpre_ref_get_elt env0))
  (ATSINStmpset tmp167 (ATSPMVlazyval_eval tmp166))
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons tmp167)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       (ats2scmpre_ref_get_elt env1)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (casefnx 4)
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp168 (ATSSELcon tmp167 0))
       (ATSINStmpset tmp169 (ATSSELcon tmp167 1))
       (ATSINSmove1_void (ats2scmpre_ref_set_elt env0 tmp169))
       (ATSINSmove1_void (ats2scmpre_ref_set_elt env1 tmp168))
       tmp168
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_take_while_cloref arg0 arg1)
(let(
;;knd = 0
  (tmpret172 #f)
  (tmp173 #f)
  (tmp174 #f)
  (tmp175 #f)
  (tmp176 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_take_while_cloref
  (ATSINStmpset tmp173 (ats2scmpre_stream_rtake_while_cloref arg0 arg1))
  (ATSINStmpset tmp174 (ATSSELboxrec tmp173 0))
  (ATSINStmpset tmp175 (ATSSELboxrec tmp173 1))
  (ATSINStmpset tmp176 (ats2scmpre_list_reverse tmp175))
  (ATSPMVtyrec tmp174 tmp176)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_rtake_while_cloref arg0 arg1)
(let(
;;knd = 0
  (tmpret177 #f)
  (tmp185 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_rtake_while_cloref
  (ATSINStmpset tmp185 atscc2scm_null)
  (_ats2scmpre_stream_loop_63 arg1 arg0 0 tmp185)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_loop_63 env0 arg0 arg1 arg2)
(let(
;;knd = 1
;;(apy0 #f)
;;(apy1 #f)
;;(apy2 #f)
  (tmpret178 #f)
  (tmp179 #f)
  (tmp180 #f)
  (tmp181 #f)
  (tmp182 #f)
  (tmp183 #f)
  (tmp184 #f)
;;var funlab_scm
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;while(true) {
    ;; funlab_scm = 0;
    ;; __patsflab__ats2scmpre_stream_loop_63
    (ATSINStmpset tmp179 (ATSPMVlazyval_eval arg0))
    (letrec(
      (casefnx
       (lambda(tmplab)(case tmplab
        ;; ATSbranchseq_beg
        ((1)
         (if (ATSCKptriscons tmp179)
           (casefnx 4)
           (begin
            (casefnx 2)
           )
         )
        ) ;; end-of-branch
        ((2)
         (ATSPMVtyrec arg0 arg2)
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; ATSbranchseq_beg
        ((3)
         (casefnx 4)
        ) ;; end-of-branch
        ((4)
         (ATSINStmpset tmp180 (ATSSELcon tmp179 0))
         (ATSINStmpset tmp181 (ATSSELcon tmp179 1))
         (ATSINStmpset tmp182 ((ATSfunclo_fclo env0) env0 arg1 tmp180))
         (if tmp182
           (begin
            (ATSINStmpset tmp183 (ats2scmpre_add_int1_int1 arg1 1))
            (ATSINStmpset tmp184 (ATSPMVtysum tmp180 arg2))
            ;; apy0 = tmp181
            ;; apy1 = tmp183
            ;; apy2 = tmp184
            ;; arg0 = apy0
            ;; arg1 = apy1
            ;; arg2 = apy2
            ;; funlab_scm = 1; // __patsflab__ats2scmpre_stream_loop_63
            (_ats2scmpre_stream_loop_63 env0 tmp181 tmp183 tmp184)
           ) ;; if-then
           (begin
            (ATSPMVtyrec arg0 arg2)
           ) ;; if-else
         )
        ) ;; end-of-branch
        ;; ATSbranchseq_end
        ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
        ) ;; end-of-case
       ) ;; end-of-lambda
      ) ;; end-of-casefnx
     ) (casefnx 1)
    ) ;; end-of-letrec
    ;; if (funlab_scm > 0) continue; else ;; return tmpret178;
  ;} // endwhile-fun
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_take_until_cloref arg0 arg1)
(let(
;;knd = 0
  (tmpret186 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_take_until_cloref
  (ats2scmpre_stream_take_while_cloref arg0 (_ats2scmpre_stream_patsfun_65__closurerize arg1))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_65 env0 arg0 arg1)
(let(
;;knd = 0
  (tmpret187 #f)
  (tmp188 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_65
  (ATSINStmpset tmp188 ((ATSfunclo_fclo env0) env0 arg0 arg1))
  (ats2scmpre_neg_bool0 tmp188)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_rtake_until_cloref arg0 arg1)
(let(
;;knd = 0
  (tmpret189 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_rtake_until_cloref
  (ats2scmpre_stream_rtake_while_cloref arg0 (_ats2scmpre_stream_patsfun_67__closurerize arg1))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_67 env0 arg0 arg1)
(let(
;;knd = 0
  (tmpret190 #f)
  (tmp191 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_67
  (ATSINStmpset tmp191 ((ATSfunclo_fclo env0) env0 arg0 arg1))
  (ats2scmpre_neg_bool0 tmp191)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(ats2scmpre_stream_list_xprod2 arg0 arg1)
(let(
;;knd = 0
  (tmpret192 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab_stream_list_xprod2
  (_ats2scmpre_stream_auxlst_71 arg0 arg1)
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_aux_69 arg0 arg1)
(let(
;;knd = 0
  (tmpret193 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_aux_69
  (ATSPMVlazyval (_ats2scmpre_stream_patsfun_70__closurerize arg0 arg1))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_70 env0 env1)
(let(
;;knd = 0
  (tmpret194 #f)
  (tmp195 #f)
  (tmp196 #f)
  (tmp197 #f)
  (tmp198 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_70
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons env1)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       atscc2scm_null
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (casefnx 4)
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp195 (ATSSELcon env1 0))
       (ATSINStmpset tmp196 (ATSSELcon env1 1))
       (ATSINStmpset tmp197 (ATSPMVtyrec env0 tmp195))
       (ATSINStmpset tmp198 (_ats2scmpre_stream_aux_69 env0 tmp196))
       (ATSPMVtysum tmp197 tmp198)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_auxlst_71 arg0 arg1)
(let(
;;knd = 0
  (tmpret199 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_auxlst_71
  (ATSPMVlazyval (_ats2scmpre_stream_patsfun_72__closurerize arg0 arg1))
) ;; end-of-let
) ;; end-of-fun


;;fun
(define
(_ats2scmpre_stream_patsfun_72 env0 env1)
(let(
;;knd = 0
  (tmpret200 #f)
  (tmp201 #f)
  (tmp202 #f)
  (tmp203 #f)
  (tmp204 #f)
  (tmp205 #f)
;;var tmplab,tmplab_scm
) ;; in-of-let
  ;; __patsflab__ats2scmpre_stream_patsfun_72
  (letrec(
    (casefnx
     (lambda(tmplab)(case tmplab
      ;; ATSbranchseq_beg
      ((1)
       (if (ATSCKptriscons env0)
         (casefnx 4)
         (begin
          (casefnx 2)
         )
       )
      ) ;; end-of-branch
      ((2)
       atscc2scm_null
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; ATSbranchseq_beg
      ((3)
       (casefnx 4)
      ) ;; end-of-branch
      ((4)
       (ATSINStmpset tmp201 (ATSSELcon env0 0))
       (ATSINStmpset tmp202 (ATSSELcon env0 1))
       (ATSINStmpset tmp204 (_ats2scmpre_stream_aux_69 tmp201 env1))
       (ATSINStmpset tmp205 (_ats2scmpre_stream_auxlst_71 tmp202 env1))
       (ATSINStmpset tmp203 (ats2scmpre_stream_append tmp204 tmp205))
       (ATSPMVlazyval_eval tmp203)
      ) ;; end-of-branch
      ;; ATSbranchseq_end
      ;; (else (atscc2scm_caseof_deadcode _FILE_ _LINE_))
      ) ;; end-of-case
     ) ;; end-of-lambda
    ) ;; end-of-casefnx
   ) (casefnx 1)
  ) ;; end-of-letrec
) ;; end-of-let
) ;; end-of-fun

;;;;;;
;;
;; end-of-compilation-unit
;;
;;;;;;
